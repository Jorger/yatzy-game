"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[962],{8962:function(e,n,r){r.r(n),r.d(n,{default:function(){return U}});var t=r(8683),i=r(4165),o=r(5861),u=r(9439),c=r(6058),a=r(3433),s=r(9514),l=r(9735),d=r(4654),f=r.n(d),E=function(e,n){return n.filter((function(n){return n.value===e})).length},S=function(e,n){return E(e,n)*e},v=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2,n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],t=!1,i=1;i<=6;i++){var o=E(i,n);if(t=r?o===e:o>=e)break}return t},O=function(e){for(var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,r=!1,t=(0,a.Z)(new Set(f()(e).map((function(e){return e.value})).sort((function(e,n){return e-n})))),i=1;;){if(!(i+(n-1)<=6))break;for(var o=0,u=0;u<n;u++)o+=t.includes(u+i)?1:0;if(i++,r=o===n)break}return r},T=function(e,n){return e.reduce((function(e,r){return e+r.score[n-1].value}),0)},y=function(e,n,r){var t=e.filter((function(e){return!e.score[n-1].isUsed})).map((function(e){return{index:e.index,score:e.score[n-1].temporal}})).sort((function(e,n){return r===l.C3.HARD?n.score-e.score:e.score-n.score})),i=t.filter((function(e){return 0!==e.score})),o=t.filter((function(e){return 0===e.score}));return(null===i||void 0===i?void 0:i[0])||(null===o||void 0===o?void 0:o[0])},I=function(){var e={value:0,temporal:0,isSelected:!1,isUsed:!1,isBonusYatzy:!1};return{UPPER_SECTION:new Array(6).fill(null).map((function(n,r){var t=[e,e];return{index:r,label:l._u[r],score:t,type:l.TG.UPPER_SECTION,value:r+1}})),LOWER_SECTION:l.aA.map((function(n,r){var t=[e,e];return{index:r,label:l.AA[r],score:t,type:l.TG.LOWER_SECTION,value:n}}))}},p=function(){return new Array(5).fill(null).map((function(e,n){return{index:n,value:0,selected:!1}}))},N=function(e){for(var n=f()(e),r=0;r<n.length;r++)n[r].selected||(n[r].value=(0,s.MH)(1,6));return n},R=function(e,n,r,t,i,o){var u=f()(e),c=f()(r),a=n.type,s=n.index,d=c[t-1].isBonusEarned,E=u[a][s].score[t-1].temporal,S=!1;if(o&&"YATZY"!==u[a][s].value){var v=u.LOWER_SECTION.findIndex((function(e){return"YATZY"===e.value}));S=u.LOWER_SECTION[v].score[t-1].isUsed}var O=E+(S?l.sF.YATZY:0);u[a][s].score[t-1].isSelected=!1,u[a][s].score[t-1].isUsed=!0,u[a][s].score[t-1].isBonusYatzy=!1,u[a][s].score[t-1].value=O;var y=T(u.UPPER_SECTION,t)+(d?l.IT:0);!d&&y>=l.a8&&(c[t-1].isBonusEarned=!0,y+=l.IT);var I=T(u.LOWER_SECTION,t);c[t-1].score=y+I,c[t-1].scoreBoard={UPPER_SECTION:y,LOWER_SECTION:I};var p=function(e,n){var r=n===l.SZ.SOLO?1:2;return Object.keys(l.TG).map((function(n){for(var t=e[n],i=t.length,o=0,u=0;u<i;u++){for(var c=0,a=0;a<r;a++)c+=t[u].score[a].isUsed?1:0;o+=c===r?1:0}return o===i})).every((function(e){return e}))}(u,i);return{copyBoardState:u,copyPlayers:c,isGameOver:p}},Z=function(e,n){var r=f()(e),t=(0,s.MH)(0,4);if(n<l.kU&&t>0)for(var i=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=[];;){var r=(0,s.MH)(0,4);if(n.includes(r)||n.push(r),n.length===e)break}return n}(t),o=0;o<r.length;o++)r[o].selected=i.includes(o);return r},x=r(4832),P=r(7313),_=r(6417),C=function(e){var n=e.difficulty,r=void 0===n?l.C3.EASY:n,a=e.typeGame,d=void 0===a?l.SZ.BOT:a,E=e.initialTurn,T=void 0===E?2:E,C=(0,P.useState)(I),U=(0,u.Z)(C,2),L=U[0],h=U[1],A=(0,P.useState)((function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l.SZ.SOLO,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=e===l.SZ.SOLO?1:2,o={id:"",name:"",score:0,scoreBoard:{UPPER_SECTION:0,LOWER_SECTION:0},isBonusEarned:!1},u=new Array(i).fill(null).map((function(e,n){return(0,t.Z)((0,t.Z)({},o),{},{id:"player".concat(n+1),name:"Player ".concat(n+1)})}));return e!==l.SZ.SOLO&&e!==l.SZ.BOT||(u[0].name=l.ys.YOU),e===l.SZ.BOT&&(u[1].name=l.ys.BOT),u[0]=(0,t.Z)((0,t.Z)({},u[0]),n),e===l.SZ.ONLINE&&r&&(u[1]=(0,t.Z)((0,t.Z)({},u[1]),r)),u}(d)})),H=(0,u.Z)(A,2),Y=H[0],m=H[1],g=(0,P.useState)(d!==l.SZ.SOLO?T:1),B=(0,u.Z)(g,2),D=B[0],k=B[1],W=(0,P.useState)((function(){return p()})),w=(0,u.Z)(W,2),G=w[0],b=w[1],z=(0,P.useState)(l.EU.HIDE),F=(0,u.Z)(z,2),j=F[0],M=F[1],K=(0,P.useState)(l.kU),J=(0,u.Z)(K,2),$=J[0],q=J[1],Q=(0,P.useState)(!1),V=(0,u.Z)(Q,2),X=V[0],ee=V[1],ne=(0,P.useState)(l.HI),re=(0,u.Z)(ne,2),te=re[0],ie=re[1],oe=(0,P.useState)(!1),ue=(0,u.Z)(oe,2),ce=ue[0],ae=ue[1],se=(0,P.useState)({isYatzy:!1,value:d===l.SZ.FRIEND?"Player ".concat(D):"",counter:d===l.SZ.FRIEND?1:0}),le=(0,u.Z)(se,2),de=le[0],fe=le[1],Ee=(0,P.useCallback)((function(e){if(e===l.yR.ROLL&&(te.index>=0&&h((function(e){return function(e,n,r){var t=f()(e);return t[n.type][n.index].score[r-1].isSelected=!1,t[n.type][n.index].score[r-1].isBonusYatzy=!1,t}(e,te,D)})),b((function(e){return N(e)})),M(l.EU.SPIN),q((function(e){return e-1}))),e===l.yR.PLAY){var n=R(L,te,Y,D,d,X),r=n.copyBoardState,t=n.copyPlayers,i=n.isGameOver;if(h(r),m(t),q(l.kU),M(l.EU.HIDE),b(p()),ie(l.HI),ae(i),(0,x.H_)("click"),i&&(0,x.H_)("yatzy"),!i&&d!==l.SZ.SOLO){var o=1===D?2:1;k(o),d===l.SZ.FRIEND&&fe((function(e){return{isYatzy:!1,value:"Player ".concat(o),counter:e.counter+1}}))}}}),[L,X,te,Y,D,d]);(0,P.useEffect)((function(){var e=d===l.SZ.BOT&&2===D,n=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,s.gw)(1e3);case 2:b((function(e){return N(Z(e,$))})),M(l.EU.SPIN),q((function(e){return e-1}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();if(!ce&&e&&j===l.EU.HIDE&&n(),e&&j===l.EU.STOPPED){var t=function(e,n,r,t,i){var o=r===l.C3.MEDIUM?1===(0,s.MH)(0,1)?l.C3.HARD:l.C3.EASY:r,u=y(e.UPPER_SECTION,i,o),c=y(e.LOWER_SECTION,i,o),a=!1;(u||c)&&(u&&(a=0!==(null===u||void 0===u?void 0:u.score)),!a&&c&&(a=0!==(null===c||void 0===c?void 0:c.score)));var d=n>0&&!a&&!t,E=f()(l.HI);if(!d){if(t){var S=e.LOWER_SECTION.findIndex((function(e){return"YATZY"===e.value}));e.LOWER_SECTION[S].score[i-1].isUsed||(E.index=S,E.type=l.TG.LOWER_SECTION)}E.index<0&&(u&&c?E={HARD:u.score>c.score?{index:u.index,type:l.TG.UPPER_SECTION}:{index:c.index,type:l.TG.LOWER_SECTION},EASY:u.score<c.score?{index:u.index,type:l.TG.UPPER_SECTION}:{index:c.index,type:l.TG.LOWER_SECTION}}[o]:(u&&(E.index=u.index,E.type=l.TG.UPPER_SECTION),c&&(E.index=c.index,E.type=l.TG.LOWER_SECTION)))}return{rollAgain:d,itemSelected:E}}(L,$,r,X,D),u=t.rollAgain,c=void 0!==u&&u,a=t.itemSelected;c?n():ie(a)}ce||j!==l.EU.SPIN||(0,x.H_)("dice")}),[L,j,r,ce,X,$,D,d]),(0,P.useEffect)((function(){var e=d===l.SZ.BOT&&2===D,n=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,s.gw)(2e3);case 2:Ee(l.yR.PLAY);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e&&te.index>=0&&n()}),[Ee,te,D,d]);var Se=d===l.SZ.ONLINE?{stop:!1,onEndCountdown:function(e){console.log({player:e})}}:void 0,ve=1===D||d===l.SZ.FRIEND,Oe=!ce&&(d===l.SZ.BOT||d===l.SZ.ONLINE)&&2===D,Te=Oe||ce||j===l.EU.SPIN||$<=0||0===function(e){return e.filter((function(e){return!e.selected})).length}(G),ye=Oe||j===l.EU.SPIN||te.index<0,Ie=!ce&&j!==l.EU.HIDE&&ve,pe=l._B[ve?"WHITE":"RED"],Ne=ve&&j===l.EU.STOPPED;return(0,_.jsxs)(c.sw,{blockContent:Oe,children:[ce&&(0,_.jsx)(c.N0,{players:Y}),(0,_.jsx)(c.xP,(0,t.Z)({},de)),(0,_.jsx)(c.h4,{countdown:Se,players:Y,turn:D}),(0,_.jsx)(c.$l,{items:L,players:Y,thrownDice:Ne,turn:D,typeGame:d,handleClick:function(e,n){var r=function(e,n,r,t){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=f()(e),u=f()(l.HI),c=!1;if(!o[r.type][r.index].score[t-1].isUsed){if(n.index>=0&&(o[n.type][n.index].score[t-1].isSelected=!1,o[n.type][n.index].score[t-1].isBonusYatzy=!1),n.index!==r.index||n.type!==r.type){u.index=r.index,u.type=r.type,o[r.type][r.index].score[t-1].isSelected=!0;var a=0!==o.LOWER_SECTION.filter((function(e){return"YATZY"===e.value&&e.score[t-1].isUsed})).length;o[r.type][r.index].score[t-1].isBonusYatzy=a&&i}c=!0}return{changeState:c,copyBoardState:o,newItemSelected:u}}(L,te,e,n,X),t=r.changeState,i=r.copyBoardState,o=r.newItemSelected;t&&((0,x.H_)("click"),h(i),ie(o))}}),(0,_.jsx)(c.WN,{dieState:j,values:G,diceTheme:pe,handleDoneDices:function(){var e=function(e,n){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,t=JSON.parse(JSON.stringify(e)),i=function(e){return e.reduce((function(e,n){return e+n.value}),0)}(n),o=v(3,n),u=v(4,n),c=v(3,n,!0)&&v(2,n,!0),a=O(n,4),s=O(n,5),d=v(5,n),f={THREE_KIND:o?i:0,FOUR_KIND:u?i:0,FULL_HOUSE:c?l.sF.FULLHOUSE:0,SMALL_STRAIGHT:a?l.sF.SMALL_STRAIGHT:0,LARGE_STRAIGHT:s?l.sF.LARGE_STRAIGHT:0,YATZY:d?l.sF.YATZY:0,CHANCE:i},E=0;E<t.UPPER_SECTION.length;E++){var T;if(null===(T=t.UPPER_SECTION[E].score[r-1])||void 0===T||!T.isUsed){var y=t.UPPER_SECTION[E].value,I=S(y,n);t.UPPER_SECTION[E].score[r-1].temporal=I}}for(var p=0;p<t.LOWER_SECTION.length;p++){var N,R=t.LOWER_SECTION[p].value;null!==(N=t.LOWER_SECTION[p].score[r-1])&&void 0!==N&&N.isUsed||(t.LOWER_SECTION[p].score[r-1].temporal=f[R])}return{isYatzy:d,copyBoardState:t}}(L,G,D),n=e.copyBoardState,r=e.isYatzy;h(n),ee(r),M(l.EU.STOPPED),ie(l.HI),r&&(fe((function(e){return{isYatzy:!0,value:"Yatzy",counter:e.counter+1}})),(0,x.H_)("yatzy"))},handleSelectDice:function(e){(0,x.H_)("click"),b(function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=f()(e);return r[n].selected=!r[n].selected,r}(G,e))}}),(0,_.jsx)(c.EK,{disabledPlay:ye,disabledRoll:Te,showPlay:Ie,throwing:$,handleClick:Ee})]})},U=P.memo(C)}}]);